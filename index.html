<!DOCTYPE html>
<html>
    <head>
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, minimum-scale=1"
        />
        <title>Salesforce Messaging</title>
    </head>
    <body>
       <script type="text/javascript">
    function initEmbeddedMessaging() {
        try {
            embeddedservice_bootstrap.settings.language = "en_US"; // For example, enter 'en' or 'en-US'
            //embeddedservice_bootstrap.settings.hideChatButtonOnLoad = true;
            embeddedservice_bootstrap.init(
                "00DHz0000003iCP",
                "BSD_Customer_Support",
                "https://downstream--uat.sandbox.my.site.com/ESWBSDCustomerSupport1701878211794",
                {
                    scrt2URL:
                        "https://downstream--uat.sandbox.my.salesforce-scrt.com",
                }
            );
        } catch (err) {
            console.error("Error loading Embedded Messaging: ", err);
        }
    }

    // Custom method to disable the launch chat button
    function disableLaunchChatButton() {
        var launchChatButton = document.getElementById("launchChatButton");
        if (launchChatButton) {
            launchChatButton.disabled = true;
        }
    }

    // Custom method to hide the launch chat button
    function hideLaunchChatButton() {
        var launchChatButton = document.getElementById("launchChatButton");
        if (launchChatButton) {
            launchChatButton.style.display = "none";
        }
    }

    // Custom method to log the end user's attempt to chat
    function logEndUserAttemptToChat() {
        // Your logging mechanism here, for example:
        console.log("User attempted to initiate chat.");
    }
</script>

<script
    type="text/javascript"
    src="https://downstream--uat.sandbox.my.site.com/ESWBSDCustomerSupport1701878211794/assets/js/bootstrap.min.js"
    onload="initEmbeddedMessaging()"
></script>

<!-- Create a custom button or invitation to launch the web chat client -->
<button id="launchChatButton" onclick="launchChat()">
    Click to contact support
</button>

<script>
    function launchChat() {
        embeddedservice_bootstrap.utilAPI
            .launchChat()
            .then(() => {
                // Success handler used to perform actions
                // when the chat client launches successfully.
                // For example, create a method that disables the launch chat button.
                disableLaunchChatButton();
            })
            .catch(() => {
                // Error handler used to perform actions
                // if the chat client fails to launch.
                // For example, create a method that hides the launch chat button.
                hideLaunchChatButton();
            })
            .finally(() => {
                // Finally handler used to perform any clean-up actions
                // regardless of whether the chat client launches successfully or not.
                // For example, create a method that logs the userâ€™s attempt to chat.
                logEndUserAttemptToChat();
            });
    }
</script>

    </body>
</html>
