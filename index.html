<!DOCTYPE html>
<html>
    <head>
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, minimum-scale=1"
        />
        <title>Salesforce Messaging</title>
    </head>
    <style type='text/css'>
  .embeddedServiceHelpButton .helpButton .uiButton {
    background-color: #7e942d;
    font-family: "Lucida Sans Unicode", sans-serif;
  }
  .embeddedServiceHelpButton .helpButton .uiButton:focus {
    outline: 1px solid #7e942d;
  }
</style>

<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<script type='text/javascript'>
    var fingroup = '010559';
    var prechatBackgroundImgURL = 'https://masterbrand.file.force.com/servlet/servlet.ImageServer?';
    var prechatBackgroundImgURLId = '0153w00000ETRdq';
    var prechatBackgroundImgURLOId = '00D46000000ZAqb';

  var initESW = function(gslbBaseURL) {
    embedded_svc.settings.displayHelpButton = true; //Or false
    embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'

    embedded_svc.settings.defaultMinimizedText = 'Chat with an Expert'; //(Defaults to Chat with an Expert)
    embedded_svc.settings.disabledMinimizedText = 'Loading...'; //(Defaults to Agent Offline)
        embedded_svc.settings.enabledFeatures = ['LiveAgent'];
        embedded_svc.settings.entryFeature = 'LiveAgent';
      embedded_svc.settings.prechatBackgroundImgURL = prechatBackgroundImgURL + "id=" + prechatBackgroundImgURLId + "&oid=" + prechatBackgroundImgURLOId;

        embedded_svc.settings.extraPrechatFormDetails = [{
            "label": "Chat Source",
            "value": "handbook",
            "transcriptFields": ["Chat_Source__c"],
            "displayToAgent": true
        }, {
            "label": "Financial Group",
            "value": fingroup,
            "transcriptFields": ["Financial_Group__c"],
            "displayToAgent": true
        }, {
            "label": "Store Number",
            "transcriptFields": ["Store_Number__c"],
            "displayToAgent": true
        }, {
            "label": "Primary Email",
            "transcriptFields": ["Contact_Email__c"],
            "displayToAgent": true
        }, {
            "label": "First Name",
            "transcriptFields": ["Contact_FirstName__c"],
            "displayToAgent": true
        }];

        embedded_svc.settings.extraPrechatInfo = [{
            "entityName": "Contact",
            "entityFieldMaps": [{
                "doCreate": true,
                "doFind": true,
                "fieldName": "External_Id__c",
                "isExactMatch": true,
                "label": "Primary Email"
            }, {
                "doCreate": true,
                "doFind": false,
                "fieldName": "FirstName",
                "label": "First Name"
            }, {
                "doCreate": true,
                "doFind": false,
                "fieldName": "LastName",
                "label": "Last Name"
            }, {
                "fieldName": "Email",
                "label": "Primary Email"
            }]
        }];

    embedded_svc.init(
      'https://masterbrand.my.salesforce.com',
      'https://masterbrand.my.salesforce-sites.com/chat',
      gslbBaseURL,
      '00D46000000ZAqb',
      'MiaBot_Embedded_Service_Handbook',
      {
        baseLiveAgentContentURL: 'https://c.la13-core1.sfdc-yfeipo.salesforceliveagent.com/content',
        deploymentId: '5723w000000sXvI',
        buttonId: '5733w000000wk4j',
        baseLiveAgentURL: 'https://d.la13-core1.sfdc-yfeipo.salesforceliveagent.com/chat',
        eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I8J0000008OItUAM_1823f01121d',        isOfflineSupportEnabled: false
      }
    );
  };

  if (!window.embedded_svc) {
    var s = document.createElement('script');
    s.setAttribute('src', 'https://masterbrand.my.salesforce.com/embeddedservice/5.0/esw.min.js');
    s.onload = function() {
      initESW(null);
    };
    document.body.appendChild(s);
  } else {
    initESW('https://service.force.com');
  }
</script>
</html>
